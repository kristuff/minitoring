var Minitoring=Minitoring||{};Minikit.ready(function(){Minitoring.Settings.Logs.init(),Minitoring.Settings.Services.init(),Minitoring.Settings.Pings.init(),Minitoring.Users.init()}),Minitoring.Admin={resetApiKey:function(){Minitoring.Api.delete("api/app/auth",null,function(e){document.querySelector("#settings-websocket-token").value=e.data.key,Minitoring.Api.key=e.data.key})},updateAppSettingValue:function(e,t,i){Minitoring.Api.post("api/app/settings","parameter="+e+"&value="+t,i)},defaultlangChanged:function(){Minitoring.Admin.updateAppSettingValue("UI_LANG",document.querySelector("#select-default-language").value)},ipActionChanged:function(){Minitoring.Admin.updateAppSettingValue("IP_ACTION",document.querySelector("#select-ip-action").value,function(e){document.querySelector("body").setAttribute("data-ip-action",e.data.newValue)})},serviceShowPortChanged:function(){Minitoring.Admin.updateAppSettingValue("SERVICES_SHOW_PORT_NUMBER",document.querySelector("#services_show_port").checked?1:0)},diskShowTmpfsChanged:function(){Minitoring.Admin.updateAppSettingValue("DISKS_SHOW_TMPFS",document.querySelector("#disks_show_tmpfs").checked?1:0)},diskShowLoopChanged:function(){Minitoring.Admin.updateAppSettingValue("DISKS_SHOW_LOOP",document.querySelector("#disks_show_loop").checked?1:0)},diskShowFileSystemChanged:function(){Minitoring.Admin.updateAppSettingValue("DISKS_SHOW_FILE_SYSTEM",document.querySelector("#disks_show_fs").checked?1:0)},cpuShowTempChanged:function(){Minitoring.Admin.updateAppSettingValue("CPU_SHOW_TEMPERATURE",document.querySelector("#cpu_show_temp").checked?1:0)}},Minitoring.Settings.Logs={logFormats:{},init:function(){Minitoring.Settings.Logs.getLogFormats(),Minikit.Event.add(document.querySelector("#settings-logs-table"),"click",Minitoring.Settings.Logs.onTableClick)},dialogCreateFormatChanged:function(){var e=document.querySelector("select#log-create-format-name");logFormat=e.options[e.selectedIndex].getAttribute("data-log-format"),document.querySelector("input#log-create-format").value=logFormat,""==logFormat?document.querySelector("input#log-create-format").removeAttribute("readonly"):document.querySelector("input#log-create-format").setAttribute("readonly","readonly"),document.querySelector("input#log-create-type").value=e.options[e.selectedIndex].getAttribute("data-log-type")},dialogEditFormatChanged:function(){var e=document.querySelector("select#log-edit-format-name"),t=e.options[e.selectedIndex].getAttribute("data-log-format");""==(document.querySelector("input#log-edit-format").value=t)?document.querySelector("input#log-edit-format").removeAttribute("readonly"):document.querySelector("input#log-edit-format").setAttribute("readonly","readonly"),document.querySelector("input#log-edit-type").value=e.options[e.selectedIndex].getAttribute("data-log-type")},getLogFormats:function(){Minitoring.Api.get("api/logs/formats",null,function(e){Minitoring.Settings.Logs.logFormats=e.data;for(var t="",i=0;i<e.data.length;i++)t+="<option value='"+e.data[i].type+"_"+e.data[i].name+"' data-log-format='"+e.data[i].format+"' data-log-format-name=\""+e.data[i].name+'" data-log-type="'+e.data[i].type+'">'+e.data[i].longName+"</option>";document.querySelector("select#log-create-format-name").innerHTML=t,document.querySelector("select#log-edit-format-name").innerHTML=t})},setAutocomplete:function(e){for(var t=0;t<Minitoring.Settings.Logs.logFormats.length;t++)if(Minitoring.Settings.Logs.logFormats[t].logType==e){clone=Object.assign({},Minitoring.Logs.logList[t]);break}},getLogFilesDetails:function(){Minitoring.Api.get("api/logs",null,function(e){for(var t="",i=0;i<e.data.length;i++)t+='<tr data-id="'+e.data[i].logId+'" data-log-format-name="'+e.data[i].logFormatName+"\" data-log-format='"+e.data[i].logFormat+"'>",t+='<td data-column="Name" class="align-left">'+e.data[i].logName+"</td>",t+=' <td data-column="Actions" class="action-bar align-right tab-no-padding desk-no-padding">',t+=' <span class="row-actions visible-hover">',t+='<a class="row-button action-link" title="Edit" data-action="edit" data-log-id="'+e.data[i].logId+'"><i class="fa fa-pencil"></i><span class="mob-only padding-left-6">Edit</span></a>',t+='<a class="row-button action-link" title="Delete" data-action="delete" data-log-id="'+e.data[i].logId+'"><i class="fa fa-trash"></i><span class="mob-only padding-left-6">Delete</span></a>',t+="</span>",t+=" </td>",t+='<td data-column="Path" class="align-left">'+e.data[i].logPath+"</td>",t+='<td data-column="Type" class="align-left"><span class="badge" data-badge="dark">'+e.data[i].logType+"</span></td>",t+='<td data-column="Format" class="align-left">'+e.data[i].logFormatName+"</td>",t+="</tr>";document.querySelector("table#settings-logs-table tbody").innerHTML=t})},onTableClick:function(e){var t=e.target.closest("a");if(Minikit.isObj(t)&&t.hasAttribute("data-action")){e.preventDefault();var i,e=t.getAttribute("data-action"),a=t.getAttribute("data-log-id");if(Minikit.isObj(e)&&Minikit.isObj(a))switch(e){case"copy":alert("TODO");break;case"delete":Minitoring.Api.delete("api/logs/"+a,null,function(e){document.querySelector('table#settings-logs-table tr[data-id="'+a+'"]').remove(),Minitoring.Logs.getLogFilesList()});break;case"edit":i=Minitoring.Logs.getlogInfoFromCache(a),document.querySelector("#system-logs-dialog").setAttribute("data-id",a),document.querySelector("#system-logs-dialog  #log-edit-name").value=i.logName,document.querySelector("#system-logs-dialog  #log-edit-path").value=i.logPath,document.querySelector("#system-logs-dialog  #log-edit-type").value=i.logType,document.querySelector("#system-logs-dialog  #log-edit-format").value=i.logFormat,document.querySelector("#system-logs-dialog  #log-edit-format-name").value=i.logType+"_"+i.logFormatName,Minitoring.Settings.Logs.showDialog("edit")}}},showDialog:function(t,e){Minikit.each(document.querySelectorAll("#system-logs-dialog .dialog-part"),function(e){e.getAttribute("data-part")==t?e.classList.add("active"):e.classList.remove("active")}),document.querySelector("#system-logs-dialog").setAttribute("data-log-id",Minikit.isNotNull(e)?e:""),document.querySelector("#system-logs-dialog").classList.add("active")},handleDialog:function(){switch(document.querySelector("#system-logs-dialog .dialog-part.active").getAttribute("data-part")){case"create":var e=document.querySelector("select#log-create-format-name"),t="log_name="+document.querySelector("#system-logs-dialog  #log-create-name").value+"&log_path="+document.querySelector("#system-logs-dialog  #log-create-path").value+"&log_type="+document.querySelector("#system-logs-dialog  #log-create-type").value+"&log_format="+document.querySelector("#system-logs-dialog  #log-create-format").value+"&log_format_name="+e.options[e.selectedIndex].getAttribute("data-log-format-name");Minitoring.Api.post("api/logs",t,function(e){Minitoring.Logs.getLogFilesList(),Minitoring.Settings.Logs.getLogFilesDetails(),document.querySelector("#system-logs-dialog").classList.remove("active")});break;case"edit":var e=document.querySelector("select#log-edit-format-name"),i=document.querySelector("#system-logs-dialog").getAttribute("data-id"),t="log_name="+document.querySelector("#system-logs-dialog  #log-edit-name").value+"&log_path="+document.querySelector("#system-logs-dialog  #log-edit-path").value+"&log_type="+document.querySelector("#system-logs-dialog  #log-edit-type").value+"&log_format="+document.querySelector("#system-logs-dialog  #log-edit-format").value+"&log_format_name="+e.options[e.selectedIndex].getAttribute("data-log-format-name");Minitoring.Api.post("api/logs/"+i,t,function(e){Minitoring.Logs.getLogFilesList(),Minitoring.Settings.Logs.getLogFilesDetails(),document.querySelector("#system-logs-dialog").classList.remove("active")})}},add:function(){Minitoring.Settings.Logs.showDialog("create")}},Minitoring.Settings.Pings={init:function(){Minikit.Event.add(document.querySelector("#settings-pings-table"),"click",Minitoring.Settings.Pings.tableClicked)},add:function(){document.querySelector('#ping-dialog [data-part="add"]').setAttribute("data-action","add"),document.querySelector("#ping-dialog-title").innerHTML=document.querySelector('#ping-dialog [data-part="add"]').getAttribute("data-add-title"),document.querySelector("#ping-dialog #ping-dialog-host").value="",Minitoring.Settings.Pings.showDialog("add","")},edit:function(e){document.querySelector('#ping-dialog [data-part="add"]').setAttribute("data-action","edit"),document.querySelector("#ping-dialog-title").innerHTML=document.querySelector('#ping-dialog [data-part="add"]').getAttribute("data-edit-title");var t=document.querySelector('#settings-pings-table tr[data-id="'+e+'"');document.querySelector("#ping-dialog #ping-dialog-host").value=t.getAttribute("data-ping-host"),Minitoring.Settings.Pings.showDialog("add",e)},activate:function(t){Minitoring.Api.apiRequest("PUT","api/ping/"+t+"/enable",null,function(e){},function(e){Minitoring.Api.notifyApiResponse(e);e=document.querySelector('#settings-pings-table tr[data-id="'+t+'"]').getAttribute("data-ping-check-enabled");document.querySelector('#settings-pings-table tr[data-id="'+t+'"] input[type="checkbox"]').setAttribute("checked",e?"true":"false")})},desactivate:function(t){Minitoring.Api.apiRequest("PUT","api/ping/"+t+"/disable",null,function(e){},function(e){Minitoring.Api.notifyApiResponse(e);e=document.querySelector('#settings-pings-table tr[data-id="'+t+'"]').getAttribute("data-ping-check-enabled");document.querySelector('#settings-pings-table tr[data-id="'+t+'"] input[type="checkbox"]').setAttribute("checked",e?"true":"false")})},remove:function(i){Minitoring.Api.apiRequest("DELETE","api/ping/"+i,null,function(e){var t=document.querySelector('#settings-pings-table tr[data-id="'+i+'"]');t.parentNode.removeChild(t)})},showDialog:function(e,t){Minikit.each(document.querySelectorAll("#ping-dialog .dialog-part"),function(e){e.classList.remove("active")}),document.querySelector('#ping-dialog [data-part="add"]').classList.add("active"),document.querySelector("#ping-dialog").setAttribute("data-id",t),document.querySelector("#ping-dialog").classList.add("active")},handleDialog:function(){switch(document.querySelector("#ping-dialog .dialog-part.active").getAttribute("data-action")){case"add":var e="ping_host="+document.querySelector("#ping-dialog  #ping-dialog-host").value+"&ping_check_port=1";Minitoring.Api.post("api/pings",e,function(e){Minitoring.Settings.Pings.refresh(),document.querySelector("#ping-dialog").classList.remove("active"),document.querySelector("#ping-dialog").setAttribute("data-id","")});break;case"edit":var t=document.querySelector("#ping-dialog").getAttribute("data-id"),e="ping_host="+document.querySelector("#ping-dialog  #ping-dialog-host").value;Minitoring.Api.post("api/ping/"+t,e,function(e){Minitoring.Settings.Pings.refresh(),document.querySelector("#ping-dialog").classList.remove("active"),document.querySelector("#ping-dialog").setAttribute("data-id","")})}},refresh:function(){Minitoring.Api.get("api/pings/",null,function(e){for(var t="",i=0;i<e.data.items.length;i++)t+=Minitoring.Settings.Pings.getHtml(e.data.items[i]);document.querySelector("#settings-pings-table tbody").innerHTML=t})},getHtml:function(e){var t="",i="1"==e.ping_check_enabled?"checked":"",a=Minikit.newId();return t+='<tr data-id="'+e.ping_id+'" data-ping-host="'+e.ping_host+'" data-ping-check-enabled="'+e.ping_check_enabled+'">',t+=' <td data-column="Host" class="align-left">'+e.ping_host+"</td>",t+=' <td class="align-right tab-no-padding desk-no-padding" data-column="Actions">',t+='<span class="row-actions visible-hover ">',t+='<a class="row-button action-link" data-action="edit" data-id="'+e.ping_id+'" data-color=""><i class="fa fa-pencil"></i><span class="mob-only padding-left-6">Edit</span></a>',t+='<a class="row-button action-link" data-action="delete" data-id="'+e.ping_id+'" data-color=""><i class="fa fa-trash"></i><span class="mob-only padding-left-6">Delete</span></a>',t+="</span>",t+="</td>",t+=' <td data-column="Check enabled" class="align-center">',t+='  <input type="checkbox" id="'+a+'" class="switch" '+i+' data-id="'+e.ping_id+'" />',t+='  <label for="'+a+'"></label>',t+=" </td>",t+="</tr>"},tableClicked:function(e){var t=e.target.closest("a");if(Minikit.isObj(t)&&t.classList.contains("action-link")){e.preventDefault();var i=t.getAttribute("data-action"),a=t.getAttribute("data-id");if(Minikit.isObj(i)&&Minikit.isObj(a))switch(i){case"delete":Minitoring.Settings.Pings.remove(a);break;case"edit":Minitoring.Settings.Pings.edit(a)}}else{e=e.target.closest('input[type="checkbox"]');Minikit.isObj(e)&&(a=e.getAttribute("data-id"),document.querySelector('#settings-pings-table  tr[data-id="'+a+'"] input[type="checkbox"].switch:checked')?Minitoring.Settings.Pings.activate(a):Minitoring.Settings.Pings.desactivate(a))}}},Minitoring.Settings.Services={init:function(){Minikit.Event.add(document.querySelector("#settings-services-table"),"click",Minitoring.Settings.Services.tableClicked)},add:function(){document.querySelector('#services-dialog [data-part="add"]').setAttribute("data-action","add"),document.querySelector("#service-dialog-title").innerHTML=document.querySelector('#services-dialog [data-part="add"]').getAttribute("data-add-title"),document.querySelector("#services-dialog #service-dialog-name").value="",document.querySelector("#services-dialog #service-dialog-host").value="",document.querySelector("#services-dialog #service-dialog-port").value="",Minitoring.Settings.Services.showDialog("add","")},edit:function(e){document.querySelector('#services-dialog [data-part="add"]').setAttribute("data-action","edit"),document.querySelector("#service-dialog-title").innerHTML=document.querySelector('#services-dialog [data-part="add"]').getAttribute("data-edit-title");var t=document.querySelector('#settings-services-table tr[data-id="'+e+'"');document.querySelector("#services-dialog #service-dialog-name").value=t.getAttribute("data-service-name"),document.querySelector("#services-dialog #service-dialog-host").value=t.getAttribute("data-service-host"),document.querySelector("#services-dialog #service-dialog-protocol").value=t.getAttribute("data-service-protocol"),document.querySelector("#services-dialog #service-dialog-port").value=t.getAttribute("data-service-port"),Minitoring.Settings.Services.showDialog("edit",e)},activate:function(i){Minitoring.Api.apiRequest("PUT","api/service/"+i+"/enable",null,function(e){},function(e){Minitoring.Api.notifyApiResponse(response);var t=document.querySelector('#settings-services-table tr[data-id="'+i+'"]').getAttribute("data-service-check-enabled");document.querySelector('#settings-services-table tr[data-id="'+i+'"] input[type="checkbox"]').setAttribute("checked",t?"true":"false")})},desactivate:function(i){Minitoring.Api.apiRequest("PUT","api/service/"+i+"/disable",null,function(e){},function(e){Minitoring.Api.notifyApiResponse(response);var t=document.querySelector('#settings-services-table tr[data-id="'+i+'"]').getAttribute("data-service-check-enabled");document.querySelector('#settings-services-table tr[data-id="'+i+'"] input[type="checkbox"]').setAttribute("checked",t?"true":"false")})},remove:function(i){Minitoring.Api.apiRequest("DELETE","api/service/"+i,null,function(e){var t=document.querySelector('#settings-services-table tr[data-id="'+i+'"]');t.parentNode.removeChild(t)})},showDialog:function(e,t){Minikit.each(document.querySelectorAll("#services-dialog .dialog-part"),function(e){e.classList.remove("active")}),document.querySelector('#services-dialog [data-part="add"]').classList.add("active"),document.querySelector("#services-dialog").setAttribute("data-id",t),document.querySelector("#services-dialog").classList.add("active")},handleDialog:function(){switch(document.querySelector("#services-dialog .dialog-part.active").getAttribute("data-action")){case"add":var e="service_name="+document.querySelector("#services-dialog  #service-dialog-name").value+"&service_port="+document.querySelector("#services-dialog  #service-dialog-port").value+"&service_host="+document.querySelector("#services-dialog  #service-dialog-host").value+"&service_protocol="+document.querySelector("#services-dialog  #service-dialog-protocol").value+"&service_check_port=1";Minitoring.Api.post("api/services",e,function(e){Minitoring.Settings.Services.refresh(),document.querySelector("#services-dialog").classList.remove("active"),document.querySelector("#services-dialog").setAttribute("data-id","")});break;case"edit":var t=document.querySelector("#services-dialog").getAttribute("data-id"),e="service_name="+document.querySelector("#services-dialog  #service-dialog-name").value+"&service_port="+document.querySelector("#services-dialog  #service-dialog-port").value+"&service_host="+document.querySelector("#services-dialog  #service-dialog-host").value+"&service_protocol="+document.querySelector("#services-dialog  #service-dialog-protocol").value+"&service_check_port=1";Minitoring.Api.post("api/service/"+t,e,function(e){Minitoring.Settings.Services.refresh(),document.querySelector("#services-dialog").classList.remove("active"),document.querySelector("#services-dialog").setAttribute("data-id","")})}},refresh:function(){Minitoring.Api.get("api/services/list",null,function(e){for(var t="",i=0;i<e.data.items.length;i++)t+=Minitoring.Settings.Services.getHtml(e.data.items[i]);document.querySelector("#settings-services #settings-services-table tbody").innerHTML=t})},getHtml:function(e){var t="",i=Minikit.isObj(e.service_port)?e.service_port:"N.C.",a=(e.service_port_open,"1"==e.service_check_enabled?"checked":""),o=Minikit.newId();return t+='<tr data-id="'+e.service_id+'" data-service-name="'+e.service_name+'" data-service-port="'+e.service_port+'" data-service-check-enabled="'+e.service_check_enabled+'" data-service-protocol="'+e.service_protocol+'" data-service-host="'+e.service_host+'">',t+='<td data-column="Service" class="align-left">'+e.service_name+"</td>",t+='<td class="align-right tab-no-padding desk-no-padding" data-column="Actions">',t+='<span class="row-actions visible-hover ">',t+='<a class="row-button action-link" data-action="edit" data-id="'+e.service_id+'" data-color=""><i class="fa fa-pencil"></i><span class="mob-only padding-left-6">Edit</span></a>',t+='<a class="row-button action-link" data-action="delete" data-id="'+e.service_id+'" data-color=""><i class="fa fa-trash"></i><span class="mob-only padding-left-6">Delete</span></a>',t+="</span>",t+="</td>",t+='<td data-column="Protocol" class="align-center">'+e.service_protocol+"</td>",t+='<td data-column="Host" class="align-left">'+e.service_host+"</td>",t+='<td data-column="Port" class="align-right">'+i+"</td>",t+='<td data-column="Check enabled" class="align-center">',t+='<input type="checkbox" id="'+o+'" class="switch" '+a+' data-id="'+e.service_id+'" />',t+='<label for="'+o+'"></label>',t+="</td>",t+="</tr>"},tableClicked:function(e){var t=e.target.closest("a");if(Minikit.isObj(t)&&t.classList.contains("action-link")){e.preventDefault();var i=t.getAttribute("data-action"),a=t.getAttribute("data-id");if(Minikit.isObj(i)&&Minikit.isObj(a))switch(i){case"delete":Minikit.dialog({message:document.querySelector("#settings-services-table").getAttribute("data-dialog-delete-text"),cancelable:!0,type:"warning",okButtonText:document.querySelector(".dialog-button-ok").innerHTML,cancelButtonText:document.querySelector(".dialog-button-cancel").innerHTML,callback:function(){Minitoring.Settings.Services.remove(a)}});break;case"edit":Minitoring.Settings.Services.edit(a)}}else{e=e.target.closest('input[type="checkbox"]');Minikit.isObj(e)&&(a=e.getAttribute("data-id"),document.querySelector('#settings-services-table  tr[data-id="'+a+'"] input[type="checkbox"].switch:checked')?Minitoring.Settings.Services.activate(a):Minitoring.Settings.Services.desactivate(a))}}},Minitoring.Users={init:function(){Minikit.Event.add(document.querySelector("#users-bottom-paginator"),"click",Minitoring.Users.onPaginatorClick),Minikit.Event.add(document.querySelector("#users-top-paginator"),"click",Minitoring.Users.onPaginatorClick),Minikit.Event.add(document.querySelector("#users-dialog .dialog-button-ok"),"click",Minitoring.Users.onDialogOkClick),Minikit.Event.add(document.querySelector("#users-table"),"click",Minitoring.Users.onTableClick)},refresh:function(){var e=Minikit.getAttr(document.querySelector("#users-data"),"data-offset",0);Minitoring.Users.getList(e)},invite:function(){Minitoring.Users.cleanDialog(),Minitoring.Users.showDialog("invite","")},create:function(){Minitoring.Users.cleanDialog(),Minitoring.Users.showDialog("create","")},onDialogOkClick:function(e){switch(e.preventDefault(),document.querySelector("#users-dialog .dialog-part.active").getAttribute("data-part")){case"invite":var t="action=invite&userEmail="+document.querySelector("#user-invite-email").value+"&output=json";Minitoring.Api.post("api/users",t,function(e){Minitoring.Api.notifyApiResponse(e),Minitoring.Users.refresh(),Minitoring.Users.closeDialog()});break;case"create":t="action=create&output=json&userEmail="+document.querySelector("#user-create-email").value+"&userName="+document.querySelector("#user-create-name").value+"&userPassword="+document.querySelector("#user-create-password").value+"&userPasswordRepeat="+document.querySelector("#user-create-password-repeat").value;Minitoring.Api.post("api/users",t,function(e){Minitoring.Api.notifyApiResponse(e),Minitoring.Users.refresh(),Minitoring.Users.closeDialog(),Minitoring.Users.cleanDialog()})}},onPaginatorClick:function(e){e.preventDefault();e=e.target.closest("[data-offset]");Minikit.isObj(e)&&Minitoring.Users.get(parseInt(e.getAttribute("data-offset")))},onTableClick:function(e){var t=e.target.closest("a");Minikit.isObj(t)&&t.hasAttribute("data-action")&&(e.preventDefault(),e=t.getAttribute("data-action"),t=t.getAttribute("data-user-id"),Minikit.isObj(e)&&Minikit.isObj(t)&&"delete"===e&&Minitoring.Users.deleteUser(t))},cleanDialog:function(){document.querySelector("#user-create-email").value="",document.querySelector("#user-create-name").value="",document.querySelector("#user-create-password").value="",document.querySelector("#user-create-password-repeat").value="",document.querySelector("#user-invite-email").value=""},closeDialog:function(){document.querySelector("#users-dialog").classList.remove("active"),document.querySelector("#users-dialog").setAttribute("data-user-id","")},deleteUser:function(e){Minikit.dialog({message:document.querySelector("#users-delete-message").value,cancelable:!0,type:"warning",okButtonText:document.querySelector(".dialog-button-ok").innerHTML,cancelButtonText:document.querySelector(".dialog-button-cancel").innerHTML,callback:function(){Minitoring.Api.delete("api/users/"+e,null,function(e){Minitoring.Api.notifyApiResponse(e),Minitoring.Users.refresh()})}})},showDialog:function(t,e){Minikit.each(document.querySelectorAll("#users-dialog .dialog-part"),function(e){e.getAttribute("data-part")==t?e.classList.add("active"):e.classList.remove("active")}),document.querySelector("#users-dialog").setAttribute("data-user-id",Minikit.isNotNull(e)?e:""),document.querySelector("#users-dialog").classList.add("active")},getList:function(i){var a,o=document.querySelector("#users-data tbody"),n=document.querySelector("#users-bottom-paginator"),r="",e=Minikit.getAttr(o,"list-order","name"),s=o.getAttribute("data-limit")?parseInt(o.getAttribute("data-limit")):20,i=Minikit.isObj(i)?parseInt(i):0;Minitoring.Api.get("api/users","offset="+i+"&limit="+s+"&order="+e+"&output=json",function(e){for(var t=0;t<e.data.items.length;t++)r+=Minitoring.Users.getHtml(e.data.items[t]);o.innerHTML=r,o.setAttribute("data-offset",i),a=e.data.items.length+" / "+e.data.total+" item(s) displayed",n.innerHTML=Minitoring.UI.getPaginatorHtml(s,i,e.data.total),n.setAttribute("data-label",a)})},getHtml:function(e){var t="",i=Minitoring.UI.getFormattedDate(e.userLastLoginTimestamp),a=Minitoring.UI.getFormattedDate(e.userCreationTimestamp),o="",n="dark";return 0<e.userActivated&&e.userDeleted<1?(n="success",o="Active"):1==e.userDeleted?(o="Deleted",n="warning"):0==e.userActivated&&(n="warning",o="Inactive"),t+='<tr class="data-row user" data-user-id="'+e.userId+'">',t+=' <td data-column="Avatar"><img class="avatar" src="'+e.userAvatarUrl+'"/></td>',t+=' <td data-column="Name">'+e.userName+"</td>",t+=' <td data-column="Actions" class="action-bar tab-align-right desk-align-right">',t+='<span class="row-actions visible-hover">',t+='<a class="row-button action-link" title="Delete" data-action="delete" data-user-id="'+e.userId+'" ><i class="fa fa-trash"></i><span class="title">Delete</span></a>',t+="</span>",t+=" </td>",t+=' <td data-column="Type">'+e.userAccountTypeRendered+"</td>",t+=' <td data-column="Email">'+e.userEmail+"</td>",t+=' <td data-column="Created on">'+a+"</td>",t+=' <td data-column="LastLogin">'+i+"</td>",t+=' <td data-column="Status"><span class="badge" data-badge="'+n+'">'+o+"</span></td>",t+="</tr>"}};